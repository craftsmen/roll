language: ruby
rvm: <%= ruby_version_with_patch_level %>

cache: bundler

before_install:
  - "echo 'gem: --no-document' > ~/.gemrc"
  - "echo '--colour' > ~/.rspec"

before_script:
  - cp .sample.env .env
  - bundle exec rake db:create db:schema:load RAILS_ENV=test

notifications:
  email: false
  irc:
    channels: 'chat.freenode.net#craftsmen'
    template: '%{repository_name} build #%{build_number} on %{branch} by %{author} finished: %{message}: %{build_url}'
